<html>
<head>
<script>

  chrome.extension.onRequest.addListener(function (request, sender, sendResponse) {
    var operation = request[0];
    var key = request[1];
    if (operation == 'get') {
      sendResponse(localStorage.getItem(key));
      return;
    }
    if (operation === 'set') {
      var value = request[2];
      localStorage.setItem(key, value);
      sendResponse(undefined);
      return;
    }
    throw 'unrecognised operation, expected "get" or "set"';
  });

</script>
</head>
</html>
